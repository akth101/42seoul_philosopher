# philosophers
`philosophers` 프로젝트는 **스레드**, **뮤텍스**를 사용하여 `철학자 문제`를 해결하는 프로젝트입니다.  
자원의 공유와 동기화 문제를 해결하면서 스레드 안전성을 확보하는 방법을 익히는 것이 목표입니다.  

---

### 목차
- [1. 구현 세부 사항](#1-구현-세부-사항)
- [2. 주요 기술적 이슈와 해결 과정](#2-주요-기술적-이슈와-해결-과정)
- [3. 평가 피드백](#3-평가-피드백)

---

### 1. 구현 세부 사항
#### 철학자 문제 설명
1. 다섯 명의 철학자가 원형으로 배치된 테이블에 앉아 있습니다.
2. 각 철학자 사이에는 하나의 포크가 놓여 있습니다.
3. 철학자는 식사하기 위해 양쪽의 포크를 모두 들어야 합니다.
4. 철학자는 생각 -> 식사 -> 잠자기 순서로 활동을 반복합니다.
5. 식사 중에는 다른 철학자가 포크를 사용할 수 없으므로, 동기화가 필요합니다.

#### 프로젝트 개요
이 프로젝트는 다섯 명의 철학자가 한 식탁에 앉아 있으며, 각 철학자는 생각하고, 먹고, 잠자는 활동을 반복해야 합니다.  
각 철학자는 포크 두 개를 사용해야 식사를 할 수 있으며, **뮤텍스**를 통해 포크 자원을 동기화합니다.  
주요 목표는 철학자들이 교착 상태(데드락)에 빠지지 않도록 하는 것입니다.

---

### 2. 주요 기술적 이슈와 해결 과정  
#### race condition을 어떻게 방지할 것인가?

결국 이 과제는 이 한 마디로 정리될 수 있는 과제라고 생각합니다. 이 목표를 달성하기 위한 과정에서 아래와 같은 문제들을 겪었습니다.  

- critical section과 mutex & semaphore의 원자성 개념을 혼동하여 스스로가 뭘 모르는지도 모른 채 본인도 알아볼 수 없는 코드를 양산하다가 코드베이스 전체를 삭제하고 다시 짜기
- 모든 스레드가 각자 다른 뮤텍스를 사용하게 하여 뮤텍스 사용이 아무런 의미가 없도록 만들기
- 모든 control flow path에서의 mutex_unlock을 고려하지 않아 다른 모든 스레드들을 무한 대기 상태에 빠지게 만들기
- 철학자 스레드끼리의 경쟁 상태만 고려한 나머지 메인 스레드와의 경쟁 상태를 고려하지 않아 스스로 program을 예측 불가능하게 만들기

사실 이때가 가장 큰 위기였습니다. 퇴학 기한이 시시각각 다가오고 있던 때였고 코드를 작성하면 작성할수록 계속해서 문제가 더 꼬여갔기 때문입니다.  
그러나 정신을 똑바로 차리고 "정확하게" 나는 무엇을 모르는지, 이 코드에서의 문제가 "정확하게" 무엇인지, "정확하게" 어떻게 해결할 수 있는 문제인지에 집중하며 논리의 칼날을 한땀한땀 갈아가면서 끊임없이 코드를 개선했습니다.  
물론, 뮤텍스와 세마포어 그리고 멀티 스레드를 직접 다뤄보며 얻은 지식과 경험 또한 매우 귀중한 부분이었지만 도저히 해결될 것 같지 않은 문제를 어떤 태도와 방법으로 풀어나가는지에 대해 배울 수 있었던 경험이었습니다.  

---

### 3. 평가 피드백
<img width="973" alt="Image" src="https://github.com/user-attachments/assets/86c101d1-0cff-48f3-a327-d3c92f1787a5" />
